# Application
APP_NAME=gerald-gateway
APP_VERSION=0.1.0
DEBUG=false

# Server
HOST=0.0.0.0
PORT=8000

# Database (PostgreSQL)
DATABASE_URL=postgresql://gerald:gerald_secret@localhost:5432/gerald_gateway
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# Bank API (Mock service)
BANK_API_URL=http://localhost:8001
BANK_API_TIMEOUT=10.0

# Ledger Webhook (Mock service)
LEDGER_WEBHOOK_URL=http://localhost:8002/mock-ledger
LEDGER_WEBHOOK_TIMEOUT=5.0

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# Scoring Settings (Risk Algorithm Configuration)
# =============================================================================
# All settings below can be tuned for A/B testing or segment-specific policies.

# --- Thin File Policy ---
# Users with insufficient history get special handling
SCORING_MIN_TRANSACTIONS=10
SCORING_MIN_HISTORY_DAYS=30
SCORING_THIN_FILE_LIMIT_CENTS=10000

# --- Factor Weights (must sum to 1.0) ---
# How much each factor contributes to the composite score
SCORING_WEIGHT_ADB=0.30
SCORING_WEIGHT_RATIO=0.35
SCORING_WEIGHT_NSF=0.35

# --- Gig Worker Adjustment ---
# Boost for users with irregular but sufficient income
SCORING_GIG_WORKER_CONSISTENCY_THRESHOLD=0.5
SCORING_GIG_WORKER_RATIO_THRESHOLD=1.2
SCORING_GIG_WORKER_BOOST=10

# --- Approval Threshold ---
# Minimum composite score to approve (0-100)
SCORING_APPROVAL_THRESHOLD=30

# --- ADB Scoring Thresholds (dollars) ---
# How average daily balance maps to score
SCORING_ADB_NEGATIVE_FLOOR=-200.0
SCORING_ADB_LOW_THRESHOLD=100.0
SCORING_ADB_MODERATE_THRESHOLD=500.0
SCORING_ADB_GOOD_THRESHOLD=1500.0

# --- Ratio Scoring Thresholds ---
# How income/spend ratio maps to score
SCORING_RATIO_CRITICAL_THRESHOLD=0.8
SCORING_RATIO_BREAKEVEN_THRESHOLD=1.0
SCORING_RATIO_SUSTAINABLE_THRESHOLD=1.3
SCORING_RATIO_HEALTHY_THRESHOLD=2.0

# --- NSF Scoring ---
# How NSF count maps to score
SCORING_NSF_FORGIVABLE_COUNT=1
SCORING_NSF_CONCERNING_COUNT=2
SCORING_NSF_HIGH_RISK_COUNT=4

# --- Credit Limit Tiers ---
# JSON array: [[min_score, max_score, limit_cents], ...]
# Default tiers: 0-29=$0, 30-44=$100, 45-59=$200, 60-74=$300, 75-84=$400, 85-94=$500, 95-100=$600
SCORING_CREDIT_LIMIT_TIERS_JSON=[[0,29,0],[30,44,10000],[45,59,20000],[60,74,30000],[75,84,40000],[85,94,50000],[95,100,60000]]
